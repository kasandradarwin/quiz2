<p style="color: green"><%= notice %></p>

<%= render @idea %>
 <small>By <%= @idea.user.first_name %> </small>
 <small>Liked by: <%= @idea.likes.count %> users</small>


<div>
<% if can? :crud, @idea %>
  <%= link_to "Edit this idea", edit_idea_path(@idea) %> |
<% end %>
  <%= link_to "Back to ideas", ideas_path %>
<% if current_user == @idea.user %>
  <%= button_to "Destroy this idea", @idea, method: :delete %>
<%end %>
<small>
  <% if @like.present? %>
      <%= button_to "Unlike", like_path(@like), method: :delete %>
    <% else %>
      <%= button_to "Like", idea_likes_path(@idea), method: :post %>
    <% end %>
</small>
</div>
<br>
<hr>


<h3>Reviews</h3>
<br>
<div id="reviews">

  <% @reviews.each do |review| %>
    <%=review.description %>
    <br>
    <br>
    <small>Reviewed By <%= review.user.first_name %> </small>
  <br>
    <% if current_user == review.user %>
      <div class="p-2"> <%= button_to "Delete this review?", idea_review_path(@idea.id, review.id), method: :delete, class: 'btn btn-outline-primary btn-sm' %></div>
    <% end %>
  <hr>
   
 
<% end %>

<%= form_with(model:[@idea, @review]) do |f| %>
  <div>
    <br>
    <%= f.text_area :description, cols: 50, rows: 3, placeholder: "What's your review?" %> 
  </div>
  <%= f.submit "Submit", class:"btn btn-outline-primary" %>
  <br>
<% end %>