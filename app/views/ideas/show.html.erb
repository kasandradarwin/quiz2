
<div class ="container">

<h3>Idea by: <%= @idea.user.first_name  %> </h3>
<%= render @idea %>
 <small>Liked by: <%= @idea.likes.count %> users</small>


<div>
<% if can? :crud, @idea %>
  <%= link_to "Edit this idea", edit_idea_path(@idea), class: 'btn btn-outline-success' %> 
<% end %>
<% if current_user == @idea.user %>
  <%= button_to "Destroy this idea", @idea, method: :delete, class: 'btn btn-outline-danger' %>
<%end %>
<small>
  <% if @like.present? %>
      <%= button_to "👎 Unlike", like_path(@like), method: :delete, class: 'btn btn-outline-danger' %>
    <% else %>
      <%= button_to "👍 Like", idea_likes_path(@idea), method: :post, class: 'btn btn-outline-primary' %>
    <% end %>
</small>
</div>
<br>


<h3>Reviews</h3>
<br>
<div id="reviews">
    <div class="card">

      <% @reviews.each do |review| %>
      <div class="card-body">
        <%=review.description %>
        <br>
        <br>
        <small>Reviewed by <%= review.user.first_name %>, <%= time_ago_in_words(review.user.created_at)%> ago</small>
      <br>
        <% if current_user == review.user %>
          <div class="p-2"> <%= button_to "Delete", idea_review_path(@idea.id, review.id), method: :delete, class: 'btn btn-outline-danger btn-sm' %></div>
        <% end %>
     <hr>
      </div>
    <% end %>
    </div>
  

  
   
 

<%= form_with(model:[@idea, @review]) do |f| %>
  <div>
    <br>
    <%= f.text_area :description, cols: 50, rows: 3, placeholder: "Let us know what you think of this idea!" %> 
  </div>
  <%= f.submit "Submit", class:"btn btn-outline-primary" %>
  <br>
<% end %>

</div>